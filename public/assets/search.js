!function(){$(function(){var t,e,n,i,o,s,a,r,l,c;return o=function(t){return $("#more").click(function(){var e,n,i,s,a,r;return n=$(this).val(),t=parseInt(n)+t,e=$(this).attr("data-make"),a=$(this).attr("data-state"),i=$(this).attr("data-min"),s=$(this).attr("data-max"),r=$(this),$(this).remove(),$.get("/search/more",{num:t},function(e){return $("#resultados").append(e).fadeIn(1e3),$("#more").val(parseInt(n)+1),o(t)})})},$("form#search").submit(function(){var t;return $("#resultados .well").remove(),$("#resultados").children().not(".loading").remove(),$(".loading").fadeIn(),t=$(this).serialize(),$.get("/search/result",t,function(e){return location.hash="?"+t,$(".loading").hide(),$("#resultados").append(e).fadeIn(1e3),o(0)}),!1}),t=function(t){var e,n,i,o;for(i=window.location.hash.substring(2),e=void 0,o=void 0,n=i.split("&"),e=0;e<n.length;){if(o=n[e].split("="),o[0]===t)return unescape(o[1]);e++}return null},n=t("make"),i=t("model"),r=t("state"),s=t("price1"),a=t("price2"),l=t("year1"),c=t("year2"),(null!=n||null!=i||null!=r||null!=s||null!=a||null!=l||null!=c)&&($("#resultados").children().not(".loading").remove(),$(".loading").fadeIn(),$.getJSON("/search/getmodels",{make_id:n},function(t){return $("#model").children("option:not(:first)").remove(),$.each(t,function(t,e){return $("#model").append("<option value='"+e.id+"'>"+e.name+"</option>")}),$("#make option[value='"+n+"']").prop("selected",!0),$("#model option[value='"+i+"']").prop("selected",!0),$("#state option[value='"+r+"']").prop("selected",!0),$("#price1 option[value='"+s+"']").prop("selected",!0),$("#price2 option[value='"+a+"']").prop("selected",!0),$("#year1 option[value='"+l+"']").prop("selected",!0),$("#year2 option[value='"+c+"']").prop("selected",!0)}),e=window.location.hash.substring(2),$.get("/search/result",e,function(t){return $(".loading").hide(),$("#resultados").append(t).fadeIn(1e3),o(0)})),$("#make").change(function(){var t;return t=$(this).val(),$.getJSON("/search/getmodels",{make_id:t},function(t){return $("#model").children("option:not(:first)").remove(),$.each(t,function(t,e){return $("#model").append("<option value='"+e.id+"'>"+e.name+"</option>")})}),!1})})}.call(this);