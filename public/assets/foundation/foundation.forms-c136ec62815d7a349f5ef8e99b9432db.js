!function(e,t,n,i){"use strict";Foundation.libs.forms={name:"forms",version:"4.3.1",cache:{},settings:{disable_class:"no-custom",last_combo:null},init:function(t,n,i){return"object"==typeof n&&e.extend(!0,this.settings,n),"string"!=typeof n?(this.settings.init||this.events(),this.assemble(),this.settings.init):this[n].call(this,i)},assemble:function(){e('form.custom input[type="radio"]',e(this.scope)).not('[data-customforms="disabled"]').not("."+this.settings.disable_class).each(this.append_custom_markup),e('form.custom input[type="checkbox"]',e(this.scope)).not('[data-customforms="disabled"]').not("."+this.settings.disable_class).each(this.append_custom_markup),e("form.custom select",e(this.scope)).not('[data-customforms="disabled"]').not("."+this.settings.disable_class).not("[multiple=multiple]").each(this.append_custom_select)},events:function(){var i=this;e(this.scope).on("click.fndtn.forms","form.custom span.custom.checkbox",function(t){t.preventDefault(),t.stopPropagation(),i.toggle_checkbox(e(this))}).on("click.fndtn.forms","form.custom span.custom.radio",function(t){t.preventDefault(),t.stopPropagation(),i.toggle_radio(e(this))}).on("change.fndtn.forms","form.custom select",function(t,n){e(this).is('[data-customforms="disabled"]')||i.refresh_custom_select(e(this),n)}).on("click.fndtn.forms","form.custom label",function(t){if(e(t.target).is("label")){var n,o,r=e("#"+i.escape(e(this).attr("for"))).not('[data-customforms="disabled"]');0!==r.length&&("checkbox"===r.attr("type")?(t.preventDefault(),n=e(this).find("span.custom.checkbox"),0===n.length&&(n=r.add(this).siblings("span.custom.checkbox").first()),i.toggle_checkbox(n)):"radio"===r.attr("type")&&(t.preventDefault(),o=e(this).find("span.custom.radio"),0===o.length&&(o=r.add(this).siblings("span.custom.radio").first()),i.toggle_radio(o)))}}).on("mousedown.fndtn.forms","form.custom div.custom.dropdown",function(){return!1}).on("click.fndtn.forms","form.custom div.custom.dropdown a.current, form.custom div.custom.dropdown a.selector",function(t){var n=e(this),r=n.closest("div.custom.dropdown"),s=o(r,"select");return r.hasClass("open")||e(i.scope).trigger("click"),t.preventDefault(),!1===s.is(":disabled")?(r.toggleClass("open"),r.hasClass("open")?e(i.scope).on("click.fndtn.forms.customdropdown",function(){r.removeClass("open"),e(i.scope).off(".fndtn.forms.customdropdown")}):e(i.scope).on(".fndtn.forms.customdropdown"),!1):void 0}).on("click.fndtn.forms touchend.fndtn.forms","form.custom div.custom.dropdown li",function(t){var i=e(this),r=i.closest("div.custom.dropdown"),s=o(r,"select"),a=0;if(t.preventDefault(),t.stopPropagation(),!e(this).hasClass("disabled")){e("div.dropdown").not(r).removeClass("open");var l=i.closest("ul").find("li.selected");if(l.removeClass("selected"),i.addClass("selected"),r.removeClass("open").find("a.current").text(i.text()),i.closest("ul").find("li").each(function(e){i[0]===this&&(a=e)}),s[0].selectedIndex=a,s.data("prevalue",l.html()),"undefined"!=typeof n.createEvent){var c=n.createEvent("HTMLEvents");c.initEvent("change",!0,!0),s[0].dispatchEvent(c)}else s[0].fireEvent("onchange")}}),e(t).on("keydown",function(t){var i=(n.activeElement,Foundation.libs.forms),o=e(".custom.dropdown.open");if(o.length>0){if(t.preventDefault(),13===t.which&&o.find("li.selected").trigger("click"),27===t.which&&o.removeClass("open"),t.which>=65&&t.which<=90){var r=i.go_to(o,t.which),s=o.find("li.selected");r&&(s.removeClass("selected"),i.scrollTo(r.addClass("selected"),300))}if(38===t.which){var s=o.find("li.selected"),a=s.prev(":not(.disabled)");a.length>0&&(a.parent()[0].scrollTop=a.parent().scrollTop()-i.outerHeight(a),s.removeClass("selected"),a.addClass("selected"))}else if(40===t.which){var s=o.find("li.selected"),r=s.next(":not(.disabled)");r.length>0&&(r.parent()[0].scrollTop=r.parent().scrollTop()+i.outerHeight(r),s.removeClass("selected"),r.addClass("selected"))}}}),this.settings.init=!0},go_to:function(e,t){var n=e.find("li"),i=n.length;if(i>0)for(var o=0;i>o;o++){var r=n.eq(o).text().charAt(0).toLowerCase();if(r===String.fromCharCode(t).toLowerCase())return n.eq(o)}},scrollTo:function(e,t){if(!(0>t)){var n=e.parent(),i=this.outerHeight(e),o=i*e.index()-n.scrollTop(),r=10*(o/t);this.scrollToTimerCache=setTimeout(function(){isNaN(parseInt(r,10))||(n[0].scrollTop=n.scrollTop()+r,this.scrollTo(e,t-10))}.bind(this),10)}},append_custom_markup:function(t,n){var i=e(n),o=i.attr("type"),r=i.next("span.custom."+o);i.parent().hasClass("switch")||i.addClass("hidden-field"),0===r.length&&(r=e('<span class="custom '+o+'"></span>').insertAfter(i)),r.toggleClass("checked",i.is(":checked")),r.toggleClass("disabled",i.is(":disabled"))},append_custom_select:function(t,n){var i,o=Foundation.libs.forms,r=e(n),s=r.next("div.custom.dropdown"),a=s.find("ul"),l=(s.find(".current"),s.find(".selector")),c=r.find("option"),u=c.filter(":selected"),p=r.attr("class")?r.attr("class").split(" "):[],d=0,h="",f=!1;if(0===s.length){var g=r.hasClass("small")?"small":r.hasClass("medium")?"medium":r.hasClass("large")?"large":r.hasClass("expand")?"expand":"";s=e('<div class="'+["custom","dropdown",g].concat(p).filter(function(e,t,n){return""===e?!1:n.indexOf(e)===t}).join(" ")+'"><a href="#" class="selector"></a><ul /></div>'),l=s.find(".selector"),a=s.find("ul"),h=c.map(function(){var t=e(this).attr("class")?e(this).attr("class"):"";return"<li class='"+t+"'>"+e(this).html()+"</li>"}).get().join(""),a.append(h),f=s.prepend('<a href="#" class="current">'+u.html()+"</a>").find(".current"),r.after(s).addClass("hidden-field")}else h=c.map(function(){return"<li>"+e(this).html()+"</li>"}).get().join(""),a.html("").append(h);if(o.assign_id(r,s),s.toggleClass("disabled",r.is(":disabled")),i=a.find("li"),o.cache[s.data("id")]=i.length,c.each(function(t){this.selected&&(i.eq(t).addClass("selected"),f&&f.html(e(this).html())),e(this).is(":disabled")&&i.eq(t).addClass("disabled")}),!s.is(".small, .medium, .large, .expand")){s.addClass("open");var o=Foundation.libs.forms;o.hidden_fix.adjust(a),d=o.outerWidth(i)>d?o.outerWidth(i):d,Foundation.libs.forms.hidden_fix.reset(),s.removeClass("open")}},assign_id:function(e,t){var n=[+new Date,Foundation.random_str(5)].join("-");e.attr("data-id",n),t.attr("data-id",n)},refresh_custom_select:function(t,n){var i=this,o=0,r=t.next(),s=t.find("option"),a=r.find("li");(a.length!==this.cache[r.data("id")]||n)&&(r.find("ul").html(""),s.each(function(){var t=e("<li>"+e(this).html()+"</li>");r.find("ul").append(t)}),s.each(function(t){this.selected&&(r.find("li").eq(t).addClass("selected"),r.find(".current").html(e(this).html())),e(this).is(":disabled")&&r.find("li").eq(t).addClass("disabled")}),r.removeAttr("style").find("ul").removeAttr("style"),r.find("li").each(function(){r.addClass("open"),i.outerWidth(e(this))>o&&(o=i.outerWidth(e(this))),r.removeClass("open")}),a=r.find("li"),this.cache[r.data("id")]=a.length)},toggle_checkbox:function(e){var t=e.prev(),n=t[0];!1===t.is(":disabled")&&(n.checked=n.checked?!1:!0,e.toggleClass("checked"),t.trigger("change"))},toggle_radio:function(e){var t=e.prev(),n=t.closest("form.custom"),i=t[0];!1===t.is(":disabled")&&(n.find('input[type="radio"][name="'+this.escape(t.attr("name"))+'"]').next().not(e).removeClass("checked"),e.hasClass("checked")||e.toggleClass("checked"),i.checked=e.hasClass("checked"),t.trigger("change"))},escape:function(e){return e?e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):""},hidden_fix:{tmp:[],hidden:null,adjust:function(t){var n=this;n.hidden=t.parents(),n.hidden=n.hidden.add(t).filter(":hidden"),n.hidden.each(function(){var t=e(this);n.tmp.push(t.attr("style")),t.css({visibility:"hidden",display:"block"})})},reset:function(){var t=this;t.hidden.each(function(n){var o=e(this),r=t.tmp[n];r===i?o.removeAttr("style"):o.attr("style",r)}),t.tmp=[],t.hidden=null}},off:function(){e(this.scope).off(".fndtn.forms")},reflow:function(){}};var o=function(t,n){for(var t=t.prev();t.length;){if(t.is(n))return t;t=t.prev()}return e()}}(Foundation.zj,this,this.document);