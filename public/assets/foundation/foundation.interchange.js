!function(e,t,n){"use strict";Foundation.libs.interchange={name:"interchange",version:"4.2.4",cache:{},images_loaded:!1,settings:{load_attr:"interchange",named_queries:{"default":"only screen and (min-width: 1px)",small:"only screen and (min-width: 768px)",medium:"only screen and (min-width: 1280px)",large:"only screen and (min-width: 1440px)",landscape:"only screen and (orientation: landscape)",portrait:"only screen and (orientation: portrait)",retina:"only screen and (-webkit-min-device-pixel-ratio: 2),only screen and (min--moz-device-pixel-ratio: 2),only screen and (-o-min-device-pixel-ratio: 2/1),only screen and (min-device-pixel-ratio: 2),only screen and (min-resolution: 192dpi),only screen and (min-resolution: 2dppx)"},directives:{replace:function(e,t){if(/IMG/.test(e[0].nodeName)){var n=e[0].src;if(new RegExp(t,"i").test(n))return;return e[0].src=t,e.trigger("replace",[e[0].src,n])}}}},init:function(t,n,i){return Foundation.inherit(this,"throttle"),"object"==typeof n&&e.extend(!0,this.settings,n),this.events(),this.images(),"string"!=typeof n?this.settings.init:this[n].call(this,i)},events:function(){var n=this;e(t).on("resize.fndtn.interchange",n.throttle(function(){n.resize.call(n)},50))},resize:function(){var t=this.cache;if(!this.images_loaded)return setTimeout(e.proxy(this.resize,this),50),void 0;for(var n in t)if(t.hasOwnProperty(n)){var i=this.results(n,t[n]);i&&this.settings.directives[i.scenario[1]](i.el,i.scenario[0])}},results:function(t,n){var i=n.length;if(i>0)for(var o=e('[data-uuid="'+t+'"]'),r=i-1;r>=0;r--){var s,a=n[r][2];if(s=this.settings.named_queries.hasOwnProperty(a)?matchMedia(this.settings.named_queries[a]):matchMedia(a),s.matches)return{el:o,scenario:n[r]}}return!1},images:function(e){return"undefined"==typeof this.cached_images||e?this.update_images():this.cached_images},update_images:function(){var t=n.getElementsByTagName("img"),i=t.length,o=0,r="data-"+this.settings.load_attr;this.cached_images=[],this.images_loaded=!1;for(var s=i-1;s>=0;s--)this.loaded(e(t[s]),function(e){if(o++,e){var t=e.getAttribute(r)||"";t.length>0&&this.cached_images.push(e)}o===i&&(this.images_loaded=!0,this.enhance())}.bind(this));return"deferred"},loaded:function(e,t){function n(){t(e[0])}function i(){if(this.one("load",n),/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var e=this.attr("src"),t=e.match(/\?/)?"&":"?";t+="random="+(new Date).getTime(),this.attr("src",e+t)}}return e.attr("src")?(e[0].complete||4===e[0].readyState?n():i.call(e),void 0):(n(),void 0)},enhance:function(){for(var n=this.images().length,i=n-1;i>=0;i--)this._object(e(this.images()[i]));return e(t).trigger("resize")},parse_params:function(e,t,n){return[this.trim(e),this.convert_directive(t),this.trim(n)]},convert_directive:function(e){var t=this.trim(e);return t.length>0?t:"replace"},_object:function(e){var t=this.parse_data_attr(e),n=[],i=t.length;if(i>0)for(var o=i-1;o>=0;o--){var r=t[o].split(/\((.*?)(\))$/);if(r.length>1){var s=r[0].split(","),a=this.parse_params(s[0],s[1],r[1]);n.push(a)}}return this.store(e,n)},uuid:function(e){function t(){return(0|65536*(1+Math.random())).toString(16).substring(1)}var n=e||"-";return t()+t()+n+t()+n+t()+n+t()+n+t()+t()+t()},store:function(e,t){var n=this.uuid(),i=e.data("uuid");return i?this.cache[i]:(e.attr("data-uuid",n),this.cache[n]=t)},trim:function(t){return"string"==typeof t?e.trim(t):t},parse_data_attr:function(e){for(var t=e.data(this.settings.load_attr).split(/\[(.*?)\]/),n=t.length,i=[],o=n-1;o>=0;o--)t[o].replace(/[\W\d]+/,"").length>4&&i.push(t[o]);return i},reflow:function(){this.images(!0)}}}(Foundation.zj,this,this.document);